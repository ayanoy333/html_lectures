<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>movement</title>
    <style>
        div.container {
            position: absolute;
            width: fit-content;
            background-color: rgb(212, 239, 30);
            text-align: center;
        }
    </style>
    <style>
        div.bg {
            width: 800px;
            height: 800px;
            background-color: rgb(110, 177, 150);
        }
    </style>
</head>

<body>
    <div id="parent" class="bg"></div>
    <input type="button" value="作成" onclick="create()">

    <script>
    
        function create(){
            var x = Math.floor(Math.random()*800);
            var y = Math.floor(Math.random()*800);
            var dx = 5 + Math.floor(Math.random()*30);      
            var m = new mmm(x,y,'□',dx);
        }

        function mmm(x,y,val,dx) {
            var element = document.createElement('div');
            element.className = 'container';
            element.innerHTML = val;
            element.style.left = x + 'px';
            element.style.left = y + 'px';
            element.style.top = y + 'px';
            element.style.top = x + 'px';
            element.px = x;
            element.py = y;
            element.xDir = 1;
            element.yDir = -1;
            document.getElementById('parent').appendChild(element);
            setInterval(() => {                                                 
                if ((element.xDir == -1 && element.px <= 0)||(element.xDir == 1 && element.px >= 800)) {                   
                    element.xDir *= -1;  
                } 
                element.px += element.xDir *dx;
                element.style.left = element.px + 'px';
            }, 10);
            setInterval(() => {                                                 
                if ((element.yDir == -1 && element.py <= 0)||(element.yDir == 1 && element.py >= 800)) {                   
                    element.yDir *= -1;  
                } 
                element.py += element.yDir *dx;
                element.style.top = element.py + 'px';
            }, 10);
            
        }
        
    </script>
</body>

</html>